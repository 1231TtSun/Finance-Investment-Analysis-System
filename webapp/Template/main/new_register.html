<!DOCTYPE html>
<html lang="en">
    <head>

        <meta charset="utf-8">
        <title>金融投资分析系统</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
	    <meta name="keywords" content="金融投资分析系统">
	    <meta name="content" content="金融投资分析系统">
        <!-- CSS -->
        <link rel='stylesheet' href='http://fonts.googleapis.com/css?family=PT+Sans:400,700'>
        <link href="{{ url_for('static',filename='login/css/reset.css') }}" rel="stylesheet" type="text/css">
        <link href="{{ url_for('static',filename='login/css/supersized.css') }}" rel="stylesheet" type="text/css">
        <link href="{{ url_for('static',filename='login/css/style.css') }}" rel="stylesheet" type="text/css">
        <link href="{{ url_for('static',filename='login/css/fstyle.css') }}" rel="stylesheet" type="text/css">
        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <script type="text/javascript" src="{{ url_for('static',filename='login/js/jquery-1.8.2.min.js') }}"></script>
        <script type="text/javascript" src="{{ url_for('static',filename='login/js/supersized.3.2.7.min.js') }}"></script>
        <script type="text/javascript" src="{{ url_for('static',filename='login/js/supersized-init.js') }}"></script>
        <script type="text/javascript" src="{{ url_for('static',filename='login/js/scripts.js') }}"></script>
        <script type="text/javascript" src="{{ url_for('static',filename='login/js/index.js') }}"></script>
        <!-- Javascript -->
    </head>

    <body>

        <div class="page-container">
{#            <h1>Metric</h1>#}
                    <main>
            <form class="form" action="{{ url_for("main_api.register") }}" method="post">
                <div class="form__cover">
                </div>
                <div class="form__loader">
                    <div class="spinner active">
                        <svg class="spinner__circular" viewBox="25 25 50 50">
                            <circle class="spinner__path" cx="50" cy="50" r="20" fill="none" stroke-width="4"
                            stroke-miterlimit="10">
                            </circle>
                        </svg>
                    </div>
                </div>
                <div class="form__content">
                    <h1>
                        <p>魔法金融</p>
                        <p>Fin-magic</p>
                    </h1>
                    <div class="styled-input">
                        <input type="text" id="user" class="styled-input__input" name="user" autocomplete="off">
                        <div class="styled-input__placeholder">
                            <span class="styled-input__placeholder-text">
                                用户名
                            </span>
                        </div>
                        <div class="styled-input__circle">
                        </div>
                        <div id="user_msg"></div>
                    </div>
                    <div class="styled-input">
                        <input type="email" id="email" class="styled-input__input" name="email" autocomplete="off">
                        <div class="styled-input__placeholder">
                            <span class="styled-input__placeholder-text">
                                邮箱
                            </span>
                        </div>
                        <div class="styled-input__circle">
                        </div>
                         <div id="email_msg"></div>
                    </div>
                    <div class="styled-input">
                        <input type="password" id="pwd" class="styled-input__input" name="pwd">
                        <div class="styled-input__placeholder">
                            <span class="styled-input__placeholder-text">
                                密码
                            </span>
                        </div>
                        <div class="styled-input__circle">
                        </div>
                        <div id="pwd_msg"></div>
                    </div>
                                        <div class="styled-input">
                        <input type="password" id="cpwd" class="styled-input__input" name="cpwd">
                        <div class="styled-input__placeholder">
                            <span class="styled-input__placeholder-text">
                                确认密码
                            </span>
                        </div>
                        <div class="styled-input__circle">
                        </div>
                                            <div id="cpwd_msg"></div>
                    </div>
                    <div style="color: red;margin-bottom: 5px">{{ error }}</div>
                    <button id="register_btn" class="styled-button" type="submit">
                        <span class="styled-button__real-text-holder">
                            <span class="styled-button__real-text">
                                注册
                            </span>
                            <span class="styled-button__moving-block face">
                                <span class="styled-button__text-holder">
                                    <span class="styled-button__text">
                                        注册
                                    </span>
                                </span>
                            </span>
                            <span class="styled-button__moving-block back">
                                <span class="styled-button__text-holder">
                                    <span class="styled-button__text">
                                        注册
                                    </span>
                                </span>
                            </span>
                        </span>
                    </button>


{#                    <div class="connect">#}
{#                <p>使用以下账号直接登录</p>#}
{#                <p>#}
{#                    <a class="facebook" href=""></a>#}
{#                    <a class="twitter" href=""></a>#}
{#                </p>#}
{##}
{#            </div>#}
                    <div > <p><a href="{{ url_for("stock_solo.basic") }}">访客登陆</a></p></div>
                    <div > <p>还没有账号？<a href="{{ url_for("main.register_phone") }}">立即注册</a></p></div>
        </div>



            </form>
        </main>
{#            <form action="" method="post">#}
{#                <input type="text" name="username" class="username" placeholder="Username">#}
{#                <input type="password" name="password" class="password" placeholder="Password">#}
{#                <button type="submit">登陆</button>#}
{#                <div class="error"><span>+</span></div>#}
{#            </form>#}
{#            <div class="connect">#}
{#                <p>使用以下账号直接登录</p>#}
{#                <p>#}
{#                    <a class="facebook" href=""></a>#}
{#                    <a class="twitter" href=""></a>#}
{#                </p>#}
{#            </div>#}
{#        </div>#}
{#        <div align="center"> <p>还没有账号？<a href="{{ url_for("main.register_phone") }}">立即注册</a></p></div>#}
            <div style="position: fixed;bottom: 10px;margin: 0 auto;left: 0px;right: 0px"><p>欢迎来到魔法金融的世界</p>
                <p>Welcome to the Fin-magic world</p></div>
        </div>
    </body>
<script>
    'use strict';

var placeholders = document.querySelectorAll('.styled-input__placeholder-text'),
    inputs = document.querySelectorAll('.styled-input__input');

placeholders.forEach(function (el, i) {
    var value = el.innerText,
        html = '';
    for (var _iterator = value, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
            if (_i >= _iterator.length) break;
            _ref = _iterator[_i++];
        } else {
            _i = _iterator.next();
            if (_i.done) break;
            _ref = _i.value;
        }

        var w = _ref;

        if (!value) value = '&nbsp;';
        html += '<span class="letter">' + w + '</span>';
    }
    el.innerHTML = html;
});

inputs.forEach(function (el) {
    var parent = el.parentNode;
    el.addEventListener('focus', function () {
        parent.classList.add('filled');
        placeholderAnimationIn(parent, true);
    }, false);
    el.addEventListener('blur', function () {
        if (el.value.length) return;
        parent.classList.remove('filled');
        placeholderAnimationIn(parent, false);
    }, false);
});

function placeholderAnimationIn(parent, action) {
    var act = action ? 'add' : 'remove';
    var letters = parent.querySelectorAll('.letter');
    letters = [].slice.call(letters, 0);
    if (!action) letters = letters.reverse();
    letters.forEach(function (el, i) {
        setTimeout(function () {
            var contains = parent.classList.contains('filled');
            if (action && !contains || !action && contains) return;
            el.classList[act]('active');
        }, 50 * i);
    });
}

setTimeout(function () {
    document.body.classList.add('on-start');
}, 100);

setTimeout(function () {
    document.body.classList.add('document-loaded');
}, 1800);

</script>
<script>
    function checkName(name) {
        $.ajax({
            url:"{{ url_for("main_api.checkName") }}",
            type:"post",
            dataType:"Json",
            data:{"name":name},
            success:function (data) {
                console.log(data)
                if (data.result== true){
                                        $("#user_msg").html("用户名已存在")
                    $("#register_btn").attr("disabled",true)

                }else {

                                        $("#user_msg").html("用户名可用")
                    $("#register_btn").attr("disabled",false)
                }
            }
        })
    }
        function checkEmail(mail) {
        $.ajax({
            url:"{{ url_for("main_api.checkEmail") }}",
            type:"post",
            dataType:"Json",
            data:{"email":mail},
            success:function (data) {
                if (data.result==true){
                                        $("#email_msg").html("邮箱已被使用")
                    $("#register_btn").attr("disabled",true)

                }else {
                    $("#email_msg").html("邮箱可用")
                    $("#register_btn").attr("disabled",false)
                }
            }
        })
    }
    function checkPwd(data) {
        var reg=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/
        if(reg.test(data)){
            $("#register_btn").attr("disabled",false)
            $("#pwd_msg").html("")
        }else {
            $("#pwd_msg").html("请使用8-16位数字字母混合密码")
            $("#register_btn").attr("disabled",true)
        }
    }
    $("#user").focusout(function () {
        var name=$("#user").val()
        if (name != null && name!= ''){
            checkName(name)
        }else {
            $("#user_msg").html("")
        }
    })
        $("#email").focusout(function () {
        var data=$("#email").val()
        if (data != null && data!= ''){
            checkEmail(data)
        }else {
            $("#email_msg").html("")
        }
    })
    $("#pwd").focusout(function () {
        var pwd=$("#pwd").val()
        if (pwd!=null && pwd!=''){
            checkPwd(pwd)
        }
        else {
            $("#pwd_msg").html("")
        }
    })
        $("#cpwd").focusout(function () {
        var pwd=$("#pwd").val()
        var cpwd=$("#cpwd").val()
        if (cpwd !="" && cpwd != pwd){
            $("#cpwd_msg").html("密码不一致")
            $("#register_btn").attr("disabled",true)
        }else {
            $("#cpwd_msg").html("")
            $("#register_btn").attr("disabled",false)
        }
    })
</script>
</html>

